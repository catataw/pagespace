/**
 * browser-bunyan - 0.3.0
 * A fork of Bunyan specifically for the browser
 * MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.bunyan=e()}}(function(){return function e(r,t,s){function i(o,a){if(!t[o]){if(!r[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[o]={exports:{}};r[o][0].call(f.exports,function(e){var t=r[o][1][e];return i(t?t:e)},f,f.exports,e,r,t,s)}return t[o].exports}for(var n="function"==typeof require&&require,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(e,r){"use strict";function t(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function s(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(d)>=0&&t.shift();var s=t[r],i=null;if(s){var n=/^\s*(at|.*@)\s*(.+)?$/.exec(s);i=Array.isArray(n)&&n[2]?n[2]:s}return i}function i(e,r){r||(r="    ");var t=e.split(/\r?\n/g);return r+t.join("\n"+r)}function n(e,r){if(r){if(g[r])return;g[r]=!0}console.error(e+"\n")}function o(e){return g[e]}function a(){}function l(){}function c(e){var r="string"==typeof e?O[e.toLowerCase()]:e;return r}function f(e,r,s){if(!(this instanceof f))return new f(e,r);var i;if(void 0!==r&&(i=e,e=r,!(i instanceof f)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var n,o,l;if(i&&s){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,n=this.fields={};var c=Object.keys(i.fields);for(l=0;l<c.length;l++)o=c[l],n[o]=i.fields[o];var u=Object.keys(e);for(l=0;l<u.length;l++)o=u[l],n[o]=e[o]}else{var p=this;if(i){for(this._level=i._level,this.streams=[],l=0;l<i.streams.length;l++){var v=t(i.streams[l]);v.closeOnExit=!1,this.streams.push(v)}this.serializers=t(i.serializers),this.src=i.src,this.fields=t(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?p.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(r){p.addStream(r,e.level)}):i&&e.level?this.level(e.level):i||p.addStream({type:"raw",stream:new a,closeOnExit:!1,level:e.level}),e.serializers&&p.addSerializers(e.serializers),e.src&&(this.src=!0),n=t(e),delete n.stream,delete n.level,delete n.streams,delete n.serializers,delete n.src,this.serializers&&this._applySerializers(n),Object.keys(n).forEach(function(e){p.fields[e]=n[e]})}}function u(e){return function(){function r(r){var c;r[0]instanceof Error?(a={err:i.serializers&&i.serializers.err?i.serializers.err(r[0]):f.stdSerializers.err(r[0])},c={err:!0},l=1===r.length?[a.err.message]:Array.prototype.slice.call(r,1)):"object"!=typeof r[0]&&null!==r[0]||Array.isArray(r[0])?(a=null,l=Array.prototype.slice.call(r)):(a=r[0],l=Array.prototype.slice.call(r,1));var u=t(i.fields);u.level=e;var p=a?t(a):null;if(p&&(i.serializers&&i._applySerializers(p,c),Object.keys(p).forEach(function(e){u[e]=p[e]})),u.levelName=k[e],u.msg=y.apply(i,l),u.time||(u.time=new Date),i.src&&!u.src)try{throw new Error(d)}catch(v){var h=s(v.stack,2);h||o("src")||n("Unable to determine src line info","src"),u.src=h||""}return u.v=m,u}var i=this,a=null,l=arguments,c=null;return 0===arguments.length?this._level<=e:void(this._level>e||(c=r(l),this._emit(c)))}}function p(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+p(t))}return r}function v(){var e=[];return function(r,t){return t&&"object"==typeof t?-1!==e.indexOf(t)?"[Circular]":(e.push(t),t):t}}var h="0.2.3",m=0,d="call-stack-error",y=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var r=/%[sdj%]/g,t=1,s=arguments,i=s.length,n=String(e).replace(r,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(s[t++]);case"%d":return Number(s[t++]);case"%j":try{return JSON.stringify(s[t++])}catch(r){return"[Circular]"}break;default:return e}}),o=s[t];i>t;o=s[++t])n+=" "+o;return n},g={};a.prototype.write=function(e){e.level<b?console.log(e):e.level<x?console.info(e):e.level<z?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack)},l.prototype.write=function(e){function r(e,r){return Array(r+1-(e+"").length).join("0")+e}var t,s="color: DimGray",i="color: SteelBlue",n="color: DimGray; font-style: italic; font-size: 0.9em";t=e.level<E?"color: DeepPink":e.level<b?"color: GoldenRod":e.level<x?"color: DarkTurquoise":e.level<z?"color: Purple":e.level<S?"color: Crimson":"color: Black";var o=e.childName?e.name+"/"+e.childName:e.name,a=k[e.level].toUpperCase();a=Array(6-a.length).join(" ")+a,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s",r(e.time.getHours(),2),r(e.time.getMinutes(),2),r(e.time.getSeconds(),2),r(e.time.getMilliseconds(),4),t,a,s,o,i,e.msg,n,e.src||""),e.err&&e.err.stack&&console.log("%c%s,",t,e.err.stack)};var w=10,E=20,b=30,x=40,z=50,S=60,O={trace:w,debug:E,info:b,warn:x,error:z,fatal:S},k={};Object.keys(O).forEach(function(e){k[O[e]]=e}),f.prototype.addStream=function(e,r){var s=this;switch((null===r||void 0===r)&&(r=b),e=t(e),!e.type&&e.stream&&(e.type="raw"),e.raw="raw"===e.type,e.level=c(e.level?e.level:r),e.level<s._level&&(s._level=e.level),e.type){case"stream":e.closeOnExit||(e.closeOnExit=!1);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}s.streams.push(e),delete s.haveNonRawStreams},f.prototype.addSerializers=function(e){var r=this;r.serializers||(r.serializers={}),Object.keys(e).forEach(function(t){var s=e[t];if("function"!=typeof s)throw new TypeError(y('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=s})},f.prototype.child=function(e,r){return new this.constructor(this,e||{},r)},f.prototype.level=function(e){if(void 0===e)return this._level;for(var r=c(e),t=this.streams.length,s=0;t>s;s++)this.streams[s].level=r;this._level=r},f.prototype.levels=function(e,r){if(void 0===e)return this.streams.map(function(e){return e.level});var t;if("number"==typeof e){if(t=this.streams[e],void 0===t)throw new Error("invalid stream index: "+e)}else{for(var s=this.streams.length,i=0;s>i;i++){var n=this.streams[i];if(n.name===e){t=n;break}}if(!t)throw new Error(y('no stream with name "%s"',e))}if(void 0===r)return t.level;var o=c(r);t.level=o,o<this._level&&(this._level=o)},f.prototype._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(s){if(!(void 0===e[s]||r&&r[s]))try{e[s]=t.serializers[s](e[s])}catch(i){n(y('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',s,i.stack||i)),e[s]=y('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',s)}})},f.prototype._emit=function(e,r){var t;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}var s;if(r||this.haveNonRawStreams)try{s=JSON.stringify(e,v())+"\n"}catch(o){var a=o.stack.split(/\n/g,2).join("\n");n('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+i(y("%s\n%s",e,o.stack)),a),s=y("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",o.message)}if(r)return s;var l=e.level;for(t=0;t<this.streams.length;t++){var c=this.streams[t];c.level<=l&&c.stream.write(c.raw?e:s)}return s},f.prototype.trace=u(w),f.prototype.debug=u(E),f.prototype.info=u(b),f.prototype.warn=u(x),f.prototype.error=u(z),f.prototype.fatal=u(S),f.stdSerializers={},f.stdSerializers.err=function(e){if(!e||!e.stack)return e;var r={message:e.message,name:e.name,stack:p(e),code:e.code,signal:e.signal};return r},r.exports=f,r.exports.TRACE=w,r.exports.DEBUG=E,r.exports.INFO=b,r.exports.WARN=x,r.exports.ERROR=z,r.exports.FATAL=S,r.exports.resolveLevel=c,r.exports.levelFromName=O,r.exports.nameFromLevel=k,r.exports.VERSION=h,r.exports.LOG_VERSION=m,r.exports.createLogger=function(e){return new f(e)},r.exports.safeCycles=v,r.exports.ConsoleFormattedStream=l,r.exports.ConsoleRawStream=a},{}]},{},[1])(1)});